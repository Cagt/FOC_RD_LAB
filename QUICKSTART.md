# FOC BLDC/PMSM 仿真实验室 - 快速开始指南

## 快速启动

### 标准版本（推荐配置）
1. **安装依赖**
```bash
pip install -r requirements.txt
```

2. **运行仿真程序**
```bash
python src/simulation.py
```

### 轻量级版本（低性能电脑）
1. **安装依赖**
```bash
pip install -r requirements.txt
```

2. **运行轻量级仿真程序**
```bash
python src/simulation_lite.py
```

### 运行测试场景
```bash
python tests/test_scenarios.py
```

## 主要功能

### 1. 基本FOC控制
- 启动程序后，使用速度滑块设置参考速度
- 观察id、iq电流曲线和速度响应
- 调整负载转矩测试抗干扰性能

### 2. 弱磁控制
- 勾选"弱磁控制"选项
- 设置高速参考（>1500 RPM）
- 选择弱磁控制方法（电压法/速度法/查表法）
- 观察id负向电流和电压限制

### 3. 参数自学习
- 勾选"参数自学习"选项
- 切换到"参数视图"标签页
- 观察电机参数的实时辨识过程

### 4. 抗干扰控制
- 勾选"抗干扰控制"选项
- 施加负载转矩扰动
- 比较有无抗干扰控制的性能差异

## 界面说明

### 控制面板（左侧）
- **速度控制**：设置参考速度（-3000到3000 RPM）
- **负载转矩**：设置负载转矩（0到10 N.m）
- **控制选项**：启用各种控制功能
- **仿真控制**：开始/暂停/重置仿真
- **电机参数**：显示当前电机参数

### 可视化面板（中间）
- **主界面**：显示id、iq电流、速度、转矩、电压等曲线
- **参数视图**：显示参数辨识过程和自适应控制增益

### 状态信息（底部）
- 显示当前仿真时间和运行状态

## 实验建议

### 初学者
1. 从简单的速度控制开始，观察FOC基本原理
2. 尝试不同的速度参考，观察系统响应
3. 施加负载扰动，观察系统鲁棒性

### 进阶用户
1. 研究弱磁控制，扩展电机高速运行范围
2. 测试参数自学习功能，了解参数辨识过程
3. 比较不同抗干扰控制方法的性能

### 研究人员
1. 修改控制算法，验证新理论
2. 扩展电机模型，研究不同类型电机
3. 优化控制参数，提高系统性能

## 性能优化建议

### 低性能电脑用户
1. 使用轻量级版本：`python src/simulation_lite.py`
2. 调整性能参数：
   - 降低采样率（增大sample_time）
   - 减少缓冲区大小
   - 增加可视化更新间隔
3. 关闭不必要的功能：
   - 参数自学习
   - 抗干扰控制
   - 动画效果

### 性能监控
- 轻量级版本包含FPS显示
- 监控CPU和内存使用情况
- 根据硬件配置调整参数

详细优化指南请参考：`docs/Performance_Optimization_Guide.md`

## 数据导出

1. **参数保存**：文件菜单 → 保存参数
2. **数据导出**：文件菜单 → 导出数据（CSV格式）
3. **图像保存**：右键点击图表 → 另存为图像

## 故障排除

1. **程序无法启动**：检查Python版本和依赖包安装
2. **仿真运行缓慢**：
   - 使用轻量级版本
   - 降低仿真速度
   - 减少可视化更新频率
3. **控制性能差**：检查电机参数设置和控制增益
4. **内存不足**：减小缓冲区大小或使用最小可视化模式

## 技术支持

如有问题，请参考：
1. 详细文档：`docs/FOC_Control_Documentation.md`
2. 性能优化指南：`docs/Performance_Optimization_Guide.md`
3. 源代码注释：各模块文件中的详细注释
4. 测试示例：`tests/test_scenarios.py`

---

**注意**：本仿真平台仅用于研究和教育目的，实际应用中请考虑硬件限制和安全因素。